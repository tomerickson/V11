"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[466],{6466:(V,h,i)=>{i.r(h),i.d(h,{ALL_RESULTS_ROUTES:()=>W});var S=i(7483),f=i(4221),_=i(8675),x=i(2678),p=i(8309),t=i(9212),r=i(6814),d=i(5195),g=i(3566),c=i(5313),v=i(2296),y=i(5683),C=i(617),z=i(8525);function w(e,o){if(1&e&&(t.TgZ(0,"option",8),t._uU(1),t.qZA()),2&e){const n=o.$implicit,a=t.oxw();t.Q6J("selected",n==a.pageSize)("value",n),t.xp6(1),t.hij(" ",n," ")}}let T=(()=>{class e{constructor(){this.pageSize=10,this.pageSizes=[5,10,15,25],this.navigator={page:1,size:this.pageSize,sizes:this.pageSizes},this.pager=new t.vpe,this.setPageSize=n=>{this.pageSize=+n.srcElement.value,this.emitEvent(this.navigator.page)},this.firstRow=()=>(this.navigator.page-1)*this.navigator.size+1,this.lastRow=()=>Math.min(this.navigator.page*this.navigator.size,this.rows?this.rows:0),this.nextPage=()=>{this.emitEvent(this.navigator.page+1)},this.priorPage=()=>{this.emitEvent(this.navigator.page-1)},this.firstPage=()=>{this.emitEvent(1)},this.lastPage=()=>{this.emitEvent(this.endPage)},this.emitEvent=n=>{const a={page:n,size:this.pageSize,sizes:this.pageSizes};this.navigator=a,this.pager.emit(a)}}get endPage(){return Math.ceil(this.rows?this.rows/this.pageSize:1)}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-custom-paginator"]],inputs:{rows:"rows"},outputs:{pager:"pager"},standalone:!0,features:[t.jDz],decls:24,vars:6,consts:[[1,"wrapper"],[1,"boxed"],["matNativeControl","","name","pageSize","title","page size",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],["type","button","title","First Page","mat-icon-button","",3,"click"],["type","button","title","Previous Page","mat-icon-button","",3,"disabled","click"],["type","button","title","Next Page","mat-icon-button","",3,"disabled","click"],["type","button","title","Last Page","mat-icon-button","",3,"click"],[3,"selected","value"]],template:function(a,s){1&a&&(t.TgZ(0,"div",0)(1,"span"),t._uU(2,"Items per page:"),t.qZA(),t.TgZ(3,"div",1)(4,"span")(5,"div")(6,"select",2),t.NdJ("change",function(m){return s.setPageSize(m)}),t.YNc(7,w,2,3,"option",3),t.qZA()()()(),t.TgZ(8,"div")(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"div")(12,"button",4),t.NdJ("click",function(){return s.firstPage()}),t.TgZ(13,"mat-icon"),t._uU(14,"first_page"),t.qZA()(),t.TgZ(15,"button",5),t.NdJ("click",function(){return s.priorPage()}),t.TgZ(16,"mat-icon"),t._uU(17,"chevron_left"),t.qZA()(),t.TgZ(18,"button",6),t.NdJ("click",function(){return s.nextPage()}),t.TgZ(19,"mat-icon"),t._uU(20,"chevron_right"),t.qZA()(),t.TgZ(21,"button",7),t.NdJ("click",function(){return s.lastPage()}),t.TgZ(22,"mat-icon"),t._uU(23,"last_page"),t.qZA()()()()),2&a&&(t.xp6(7),t.Q6J("ngForOf",s.pageSizes),t.xp6(3),t.lnq("",s.firstRow()," - ",s.lastRow()," of ",s.rows,""),t.xp6(5),t.Q6J("disabled",s.navigator.page<2),t.xp6(3),t.Q6J("disabled",s.navigator.page==s.endPage))},dependencies:[r.ez,r.sg,v.ot,v.RK,y.lN,C.Ps,C.Hw,z.LD],styles:["div.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}div.wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:1ex}.boxed[_ngcontent-%COMP%]{display:flex;flex-direction:row;border:1px solid lightgray;border-radius:5px;padding:1em;color:#000c}select[_ngcontent-%COMP%]{border:none;background-color:transparent;width:5em}"]})}return e})();var Z=i(2070),u=i(7936);function R(e,o){1&e&&t.GkF(0)}function P(e,o){if(1&e&&(t.ynx(0),t.YNc(1,R,1,0,"ng-container",7),t.BQk()),2&e){t.oxw();const n=t.MAs(7);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function F(e,o){1&e&&t.GkF(0)}function L(e,o){if(1&e&&(t.ynx(0),t.YNc(1,F,1,0,"ng-container",7),t.BQk()),2&e){t.oxw();const n=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function b(e,o){1&e&&t.GkF(0)}function O(e,o){if(1&e&&(t.ynx(0),t.YNc(1,b,1,0,"ng-container",7),t.BQk()),2&e){t.oxw();const n=t.MAs(11);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function U(e,o){if(1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div"),t._uU(3,"An error occurred!"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"json"),t.qZA()()()),2&e){const n=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,1,n.error))}}function k(e,o){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._UZ(2,"mfmp-progress-spinner"),t.qZA()())}function Q(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Query"),t.qZA())}function N(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.query)}}function M(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Size"),t.qZA())}function D(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.size)}}function J(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Date"),t.qZA())}function E(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.date,"dd-MMM-yyyy HH:mm:ss")," ")}}function H(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Link"),t.qZA())}function Y(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",22),t.NdJ("click",function(){const l=t.CHM(n).$implicit,m=t.oxw(3);return t.KtG(m.openLink(l.link))}),t._uU(1," Open "),t.qZA()}}function B(e,o){1&e&&t._UZ(0,"tr",23)}function q(e,o){1&e&&t._UZ(0,"tr",24)}function j(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"table",10),t.NdJ("matSortChange",function(s){t.CHM(n);const l=t.oxw(2);return t.KtG(l.sortTable(s))}),t.ynx(1,11),t.YNc(2,Q,2,0,"th",12)(3,N,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,M,2,0,"th",12)(6,D,2,1,"td",13),t.BQk(),t.ynx(7,15),t.YNc(8,J,2,0,"th",12)(9,E,3,4,"td",13),t.BQk(),t.ynx(10,16),t.YNc(11,H,2,0,"th",12)(12,Y,2,0,"td",17),t.BQk(),t.YNc(13,B,1,0,"tr",18)(14,q,1,0,"tr",19),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("dataSource",n.resultList)("trackBy",n.tracker),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumns)}}function G(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-content"),t.YNc(2,j,15,4,"table",8),t.TgZ(3,"div")(4,"mfmp-custom-paginator",9),t.NdJ("pager",function(s){t.CHM(n);const l=t.oxw();return t.KtG(l.handlePageEvent(s))}),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.resultList),t.xp6(2),t.Q6J("rows",n.rows?n.rows:void 0)}}let I=(()=>{class e{constructor(){this.featureService=(0,t.f3M)(u.U),this.sorter=new t.vpe,this.opener=new t.vpe,this.displayColumns=["query","size","date","link"],this.sortedData=[],this.buildDataSource=()=>{this.dataSource=new c.by(this.resultList||[])},this.openLink=n=>{this.opener.emit(n)}}set ready(n){this.flowSwitch=n?2:0+(this.error?1:0)}set error(n){this.flowSwitch=this.ready?2:0+(n?1:0)}sortTable(n){this.sorter.emit(n)}ngOnInit(){this.buildDataSource()}ngAfterViewInit(){this.resultList&&(this.dataSource.data=this.resultList,this.dataSource.sort=this.sort)}tracker(n,a){return a.link}handlePageEvent(n){console.log("from custompaginator.nextPage");const a=n;a.page=n.page,a.size=n.size,a.sizes=n.sizes,this.pageSize=a.size,this.pageIndex=a.page,this.pageSizes=a.sizes,this.featureService.navigate(a)}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-all-results-face"]],viewQuery:function(a,s){if(1&a&&t.Gf(g.YE,5),2&a){let l;t.iGM(l=t.CRH())&&(s.sort=l.first)}},inputs:{pageSize:"pageSize",pageSizes:"pageSizes",rows:"rows",ready:"ready",error:"error",resultList:"resultList"},outputs:{sorter:"sorter",opener:"opener"},standalone:!0,features:[t.jDz],decls:12,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"wrapper"],["errorTemplate",""],["waitingTemplate",""],["readyTemplate",""],[4,"ngTemplateOutlet"],["mat-table","","matSort","","displayedColumns","displayColumns",3,"dataSource","trackBy","matSortChange",4,"ngIf"],[3,"rows","pager"],["mat-table","","matSort","","displayedColumns","displayColumns",3,"dataSource","trackBy","matSortChange"],["matColumnDef","query"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","size"],["matColumnDef","date"],["matColumnDef","link"],["class","hover","mat-cell","",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"hover",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,s){1&a&&(t.ynx(0,0),t.YNc(1,P,2,1,"ng-container",1)(2,L,2,1,"ng-container",1)(3,O,2,1,"ng-container",2),t.BQk(),t.TgZ(4,"mat-card",3)(5,"mat-card-content"),t.YNc(6,U,7,3,"ng-template",null,4,t.W1O)(8,k,3,0,"ng-template",null,5,t.W1O)(10,G,5,2,"ng-template",null,6,t.W1O),t.qZA()()),2&a&&(t.Q6J("ngSwitch",s.flowSwitch),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",0))},dependencies:[r.ez,r.O5,r.tP,r.RF,r.n9,r.ED,r.Ts,r.uU,d.QW,d.a8,d.dn,g.JX,g.YE,g.nU,c.p0,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,T,Z.O],styles:[".wrapper[_ngcontent-%COMP%]{height:100%}.hover[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]})}return e})();var A=i(2096),X=i(5619),$=i(1476);class K{}const W=[{path:"",component:(()=>{class e{constructor(){this.store=(0,t.f3M)(f.yh),this.headerService=(0,t.f3M)(_.d),this.featureService=(0,t.f3M)(u.U),this.results=(0,A.of)([]),this.pageIndex=0,this.pageSize=new X.X(10),this.pageSizes=[5,10,15,25],this.pageEvent=new $.kl,this.pageManager=new K,this.openLink=n=>{this.featureService.openLink(n)},this.sortData=n=>{this.store.dispatch(p.Nw.sort({payload:n}))}}ngOnInit(){this.page=(0,A.of)([]),this.pageManager.page=1,this.pageManager.size=10,this.pageManager.sizes=this.pageSizes,this.headerService.buildPageHeader("all-results"),this.results=this.store.select(p.zL.selectResults),this.page=this.store.select(p.zL.selectPage),this.rows=this.store.select(p.zL.selectRows),this.ready=this.store.select(p.zL.selectReady),this.error=this.store.select(p.zL.selectError),this.store.dispatch(p.Nw.loadResults({query:"TODO: remove this"}))}switchPage(n){const a=n;console.log(`head: navigator: ${a}`),this.pageSize.next(a.size),this.store.dispatch(p.Nw.setPage({payload:a}))}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-all-results-head"]],standalone:!0,features:[t.jDz],decls:6,vars:16,consts:[[3,"resultList","pageSize","pageSizes","ready","error","rows","opener","sorter"]],template:function(a,s){1&a&&(t.TgZ(0,"mfmp-all-results-face",0),t.NdJ("opener",function(m){return s.openLink(m)})("sorter",function(m){return s.sortData(m)}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()),2&a&&t.Q6J("resultList",t.lcZ(1,6,s.page))("pageSize",t.lcZ(2,8,s.pageSize))("pageSizes",s.pageSizes)("ready",t.lcZ(3,10,s.ready))("error",t.lcZ(4,12,s.error))("rows",t.lcZ(5,14,s.rows))},dependencies:[r.ez,r.Ov,I],encapsulation:2})}return e})(),providers:[(0,f.oY)(p.zL),(0,S.y3)([p.Sz]),{provide:u.U,useClass:u.U},{provide:_.d,useClass:_.d}],children:[{path:"reports",component:x.a},{path:"paginator",component:T}]}]}}]);