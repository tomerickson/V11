"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[84],{7084:(Z,T,a)=>{a.r(T),a.d(T,{TABLES_IN_DETAIL_ROUTES:()=>z});var m={};a.r(m),a.d(m,{fetchPageEFfect:()=>S,fetchPageErrorAlert:()=>H});var c=a(7483),r=a(4221),u=a(8675);const o=(0,r.R7)({source:"TablesInDetail API",events:{reset:(0,r.uZ)(),fetchPage:(0,r.uZ)(),fetchPageSuccess:(0,r.Ky)(),fetchPageFailure:e=>({error:e})}});var t=a(9212),D=a(4664),y=a(7398),E=a(6306),M=a(2096),I=a(9397),b=a(2744),F=a(6414);let p=(()=>{class e{constructor(){this.crud=(0,t.f3M)(F.I),this.page="TablesInDetail.php"}htmlToDocument(n){const i=(new DOMParser).parseFromString(n,"text/html").activeElement?.outerHTML??"";let f=document.implementation.createHTMLDocument();return f.documentElement.innerHTML="<head></head>"+i,f}getTablesPage(){return this.crud.getPage(this.page)}parseTablesPage(n){const l=(new DOMParser).parseFromString(n,"text/html").querySelector("body");let i=0;for(;;){const d=l.children[0];if("P"===d.tagName&&i++,3===i)break;l.removeChild(d)}let f="";for(let d=0;d<l.children.length;d++)f+=l.children[d].outerHTML;return f}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();const S=(0,c.GW)((e=(0,t.f3M)(c.eX))=>{const h=(0,t.f3M)(p);return e.pipe((0,c.l4)(o.fetchPage),(0,D.w)(()=>h.getTablesPage().pipe((0,y.U)(n=>h.parseTablesPage(n)),(0,y.U)(n=>o.fetchPageSuccess({payload:n})),(0,E.K)(n=>(0,M.of)(o.fetchPageFailure({error:n}))))))},{functional:!0}),H=(0,c.GW)(()=>{const e=(0,t.f3M)(b.c);return(0,t.f3M)(c.eX).pipe((0,c.l4)(o.fetchPageFailure),(0,I.b)(()=>e.showClientError("No results found.")))},{functional:!0,dispatch:!1}),C={html:"",ready:!1,loading:!1,error:null},O=(0,r.Lq)(C,(0,r.on)(o.reset,()=>({...C})),(0,r.on)(o.fetchPage,e=>({...e,ready:!1,loading:!0,error:null})),(0,r.on)(o.fetchPageSuccess,(e,h)=>({...e,loading:!1,ready:!0,html:h.payload})),(0,r.on)(o.fetchPageFailure,(e,h)=>({...e,loading:!1,error:h.error}))),g=(0,r.Tz)({name:"tables-in-detail",reducer:O});var v=a(6814),P=a(5195),L=a(9693);let A=(()=>{class e{set html(n){this._html=n}get html(){return this._html?this._html:""}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-tables-in-detail-face"]],inputs:{html:"html"},standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[["mfmp-html","",3,"html"]],template:function(s,l){1&s&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._UZ(2,"div",0),t.qZA()()),2&s&&(t.xp6(2),t.Q6J("html",l.html))},dependencies:[v.ez,L.s,P.QW,P.a8,P.dn],styles:["p[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid black}h6[_ngcontent-%COMP%]{font-size:1em;text-align:center;font-weight:500}"]})}return e})();const x=["mfmpContent"],z=[{path:"",component:(()=>{class e{constructor(){this.store=(0,t.f3M)(r.yh),this.headerService=(0,t.f3M)(u.d),this.html=(0,M.of)()}ngOnInit(){this.headerService.buildPageHeader("tables-in-detail"),this.html=this.store.select(g.selectHtml),this.store.dispatch(o.fetchPage())}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-tables-in-detail-head"]],viewQuery:function(s,l){if(1&s&&t.Gf(x,5),2&s){let i;t.iGM(i=t.CRH())&&(l.container=i.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[3,"html"]],template:function(s,l){1&s&&(t._UZ(0,"mfmp-tables-in-detail-face",0),t.ALo(1,"async")),2&s&&t.Q6J("html",t.lcZ(1,1,l.html))},dependencies:[v.ez,v.Ov,A],encapsulation:2})}return e})(),providers:[(0,r.oY)(g),(0,c.y3)([m]),{provide:u.d,useClass:u.d},{provide:p,useClass:p}]}]}}]);