"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[465],{4465:(U,P,n)=>{n.r(P),n.d(P,{NOTES_ROUTES:()=>Q});var d={};n.r(d),n.d(d,{fetchPageEFfect:()=>T,fetchPageErrorAlert:()=>O});var u=n(8675),p=n(6814),e=n(9212),f=n(5195),r=n(4221),y=n(2096);const c=(0,r.R7)({source:"Notes API",events:{reset:(0,r.uZ)(),fetchPage:(0,r.uZ)(),fetchPageSuccess:(0,r.Ky)(),fetchPageFailure:t=>({error:t})}});var i=n(7483),N=n(4664),M=n(7398),E=n(6306),F=n(9397),H=n(2744),S=n(6414);let g=(()=>{class t{constructor(){this.crud=(0,e.f3M)(S.I),this.page="notes.php"}htmlToDocument(s){const h=(new DOMParser).parseFromString(s,"text/html").activeElement?.outerHTML??"";let l=document.implementation.createHTMLDocument();return l.documentElement.innerHTML="<head></head>"+h,l}getNotesPage(){return this.crud.getPage(this.page)}parseNotesPage(s){const a=(new DOMParser).parseFromString(s,"text/html").querySelector("body");for(;;){const l=a.children[0];if("H5"===l.tagName)break;a.removeChild(l)}let h="";for(let l=0;l<a.children.length;l++)h+=a.children[l].outerHTML;return h}static#t=this.\u0275fac=function(o){return new(o||t)};static#e=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();const T=(0,i.GW)((t=(0,e.f3M)(i.eX))=>{const m=(0,e.f3M)(g);return t.pipe((0,i.l4)(c.fetchPage),(0,N.w)(()=>m.getNotesPage().pipe((0,M.U)(s=>m.parseNotesPage(s)),(0,M.U)(s=>c.fetchPageSuccess({payload:s})),(0,E.K)(s=>(0,y.of)(c.fetchPageFailure({error:s}))))))},{functional:!0}),O=(0,i.GW)(()=>{const t=(0,e.f3M)(H.c);return(0,e.f3M)(i.eX).pipe((0,i.l4)(c.fetchPageFailure),(0,F.b)(()=>t.showClientError("No results found.")))},{functional:!0,dispatch:!1}),C={html:"",ready:!1,loading:!1,error:null},z=(0,r.Lq)(C,(0,r.on)(c.reset,()=>({...C})),(0,r.on)(c.fetchPage,t=>({...t,ready:!1,loading:!0,error:null})),(0,r.on)(c.fetchPageSuccess,(t,m)=>({...t,loading:!1,ready:!0,html:m.payload})),(0,r.on)(c.fetchPageFailure,(t,m)=>({...t,loading:!1,error:m.error}))),v=(0,r.Tz)({name:"notes",reducer:z});var L=n(9693);let Z=(()=>{class t{constructor(){this._html=""}set html(s){this._html=s}get html(){return this._html?this._html:""}ngOnInit(){console.log(this.html)}static#t=this.\u0275fac=function(o){return new(o||t)};static#e=this.\u0275cmp=e.Xpm({type:t,selectors:[["mfmp-note-content"]],inputs:{html:"html"},standalone:!0,features:[e.jDz],decls:3,vars:1,consts:[["mfmp-html","",3,"html"]],template:function(o,a){1&o&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e._UZ(2,"div",0),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("html",a.html))},dependencies:[p.ez,L.s,f.QW,f.a8,f.dn],styles:["h5[_ngcontent-%COMP%]{font-size:16pt;font-weight:500}"]})}return t})();const D=["mfmpContent"],Q=[{path:"",component:(()=>{class t{constructor(){this.store=(0,e.f3M)(r.yh),this.headerService=(0,e.f3M)(u.d),this.html=(0,y.of)()}ngOnInit(){this.headerService.buildPageHeader("notes"),this.html=this.store.select(v.selectHtml),this.store.dispatch(c.fetchPage())}static#t=this.\u0275fac=function(o){return new(o||t)};static#e=this.\u0275cmp=e.Xpm({type:t,selectors:[["mfmp-notes"]],viewQuery:function(o,a){if(1&o&&e.Gf(D,5),2&o){let h;e.iGM(h=e.CRH())&&(a.container=h.first)}},standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[3,"html"]],template:function(o,a){1&o&&(e._UZ(0,"mfmp-note-content",0),e.ALo(1,"async")),2&o&&e.Q6J("html",e.lcZ(1,1,a.html))},dependencies:[p.ez,p.Ov,f.QW,Z],encapsulation:2})}return t})(),providers:[(0,r.oY)(v),(0,i.y3)([d]),{provide:u.d,useClass:u.d},{provide:g,useClass:g}]}]}}]);