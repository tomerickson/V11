"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[652],{4652:(Re,O,i)=>{i.r(O),i.d(O,{LENR_EVENTS_ROUTES:()=>Fe});var E={};i.r(E),i.d(E,{fetchSearchResultsEffect:()=>K,loadAllEventsErrorAlert:()=>H,loadEventDetailEffect:()=>G,prefetchEffect:()=>V,prefetchErrorAlert:()=>j});var p=i(7483),c=i(4221),N=i(2600),e=i(5879),b=i(4664),L=i(7398),A=i(6306),C=i(2096),F=i(9397),S=i(2744);const m=(0,c.R7)({source:"LenrEvents API",events:{Reset:(0,c.uZ)(),Prefetch:(0,c.Ky)(),"Prefetch Success":(0,c.Ky)(),"Prefetch Failure":r=>({error:r}),"Fetch Search Results":(0,c.Ky)(),"Fetch Search Results Success":(0,c.Ky)(),"Fetch Search Results Failure":r=>({error:r}),sortSearchResults:(0,c.Ky)(),"Find Event Id":(0,c.Ky)(),"Load Event Detail":(0,c.Ky)(),"Load Event Detail Success":(0,c.Ky)(),"Load Event Detail Failure":r=>({error:r})}});var J=i(9862),Q=i(6414),z=i(8045);let w=(()=>{var r;class o{constructor(){this.ready=!1,this.stub={},this.getInputValue=(n,t)=>{const s=n.find(l=>l.id===t);if(s)return s.value;throw`Incorrect input element Id: ${t}`}}initialize(n){this.dom=(new DOMParser).parseFromString(n,"text/html"),this.ready=!0}parseCitations(n){let t=n.split(/\r?\n|\r|\n/g);return t=t.filter(s=>s.trim().length>0),t.length>0?t:null}fail(){throw"page scraper service is not initialized."}get categories(){this.ready||this.fail();let n=[],t=Array.from(this.dom.documentElement.getElementsByTagName("select")).find(s=>"s_Category"===s.id);if(t)for(let s of t.options)n.push(s.value);return n}get eventCount(){this.ready||this.fail();let n=0,t=Array.from(this.dom.documentElement.getElementsByTagName("p")).find(s=>s.textContent?.includes("Exploring the new"))?.textContent;if(t){const l=/Exploring the new .*?([0-9]+) entries/i.exec(t);n=l?+l[1]:0,console.log("eventCount",n)}return n}get maxId(){this.ready||this.fail();let n=0,t=Array.from(this.dom.documentElement.getElementsByTagName("input")).find(s=>"s_Index_to"===s.id);return n=t?+t.value:0,n}get detail(){this.ready||this.fail();const n=Array.from(this.dom.getElementsByTagName("input"));let t={};t.category=this.getInputValue(n,"Category"),t.year=+this.getInputValue(n,"Year"),t.author=this.getInputValue(n,"Author"),t.title=this.getInputValue(n,"Title"),t.journal=this.getInputValue(n,"Journal_Title"),t.editor=this.getInputValue(n,"Editor"),t.publisher=this.getInputValue(n,"Publisher"),t.city=this.getInputValue(n,"City"),t.date=this.getInputValue(n,"Date"),t.keywords=this.getInputValue(n,"Keywords").split(","),t.headline=this.getInputValue(n,"Headline"),t.category=this.getInputValue(n,"Category");const s=Array.from(this.dom.getElementsByTagName("textarea"));for(let u of s)switch(u.name.toLowerCase()){case"abstract":t.abstract=u.innerText;break;case"comment":t.comment=u.innerText;break;case"citations":const _=this.parseCitations(u.innerText);_&&(t.citations=_)}const l=Array.from(this.dom.getElementsByTagName("a"));return t.hyperlinks=l.map(u=>u.href),t}get events(){this.ready||this.fail();let n=new Array,t=this.dom.getElementById("r_id");if(t)for(let s=0;s<t.options.length;s++){const l=t.options[s];let u=+l.value;const Z=l.innerText.split(":"),_={};_.year=+Z[0],_.category=Z[1],_.author=Z[2],_.title=Z[3],_.id=u,n.push(_)}return n}}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),o})(),x=(()=>{var r;class o{constructor(){this.crud=(0,e.f3M)(Q.I),this.pageScraper=(0,e.f3M)(w),this.page="Select_LENR_Events.php",this.preFetchProperty=n=>this.getEventsPage(),this.parseProperties=n=>{this.pageScraper.initialize(n);const t={};return t.eventCount=this.pageScraper.eventCount,t.maxId=this.pageScraper.maxId,t.categories=this.pageScraper.categories,t}}getEventsPage(){return this.crud.getPage(this.page)}postEventPage(n){const t=(0,z.Xx)(n),s=(new J.WM).set("Accept","text/html").set("Content-Type","application/x-www-form-urlencoded");return this.crud.postPage(this.page,t,s)}parseEventDetail(n,t){this.pageScraper.initialize(n);const s=this.pageScraper.detail;return t&&(s.id=t),s}parseEventList(n){return this.pageScraper.initialize(n),this.pageScraper.events}}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),o})();const V=(0,p.GW)((r=(0,e.f3M)(p.eX))=>{const o=(0,e.f3M)(x);return r.pipe((0,p.l4)(m.prefetch),(0,b.w)(a=>o.preFetchProperty(a.payload).pipe((0,L.U)(n=>{const t=o.parseProperties(n);return m.prefetchSuccess({payload:t})}),(0,A.K)(n=>(0,C.of)(m.prefetchFailure({error:n}))))))},{functional:!0}),K=(0,p.GW)((r=(0,e.f3M)(p.eX))=>{const o=(0,e.f3M)(x);return r.pipe((0,p.l4)(m.fetchSearchResults),(0,b.w)(a=>o.postEventPage(a.payload).pipe((0,L.U)(n=>{const t=o.parseEventList(n);return m.fetchSearchResultsSuccess({payload:t})}),(0,A.K)(n=>(0,C.of)(m.fetchSearchResultsFailure({error:n}))))))},{functional:!0}),G=(0,p.GW)((r=(0,e.f3M)(p.eX))=>{const o=(0,e.f3M)(x);return r.pipe((0,p.l4)(m.loadEventDetail),(0,b.w)(a=>o.postEventPage(a.payload).pipe((0,L.U)(n=>{const t=o.parseEventDetail(n,a.payload.r_id);return m.loadEventDetailSuccess({payload:t})}),(0,A.K)(n=>(0,C.of)(m.loadEventDetailFailure({error:n}))))))},{functional:!0}),H=(0,p.GW)(()=>{const r=(0,e.f3M)(S.c);return(0,e.f3M)(p.eX).pipe((0,p.l4)(m.fetchSearchResultsFailure),(0,F.b)(()=>r.showClientError("No results found.")))},{functional:!0,dispatch:!1}),j=(0,p.GW)(()=>{const r=(0,e.f3M)(S.c);return(0,e.f3M)(p.eX).pipe((0,p.l4)(m.prefetchFailure),(0,F.b)(()=>r.showClientError("Something went wrong")))},{functional:!0,dispatch:!1}),R={formData:{},loading:!1,ready:!1,error:null,eventCount:0,maxEventId:0,currentEventId:0,currentEvent:{},categories:[],lenrEvents:[],html:null},B=(0,c.Lq)(R,(0,c.on)(m.reset,()=>({...R})),(0,c.on)(m.prefetch,r=>({...r,eventCount:0,maxEventId:0,categories:[],lenrDetails:[],error:null})),(0,c.on)(m.prefetchSuccess,(r,o)=>({...r,eventCount:o.payload.eventCount,maxEventId:o.payload.maxId,categories:o.payload.categories})),(0,c.on)(m.prefetchFailure,(r,o)=>({...r,loading:!1,ready:!1,error:o.error})),(0,c.on)(m.fetchSearchResults,r=>({...r,loading:!0,ready:!1,error:null})),(0,c.on)(m.fetchSearchResultsFailure,(r,o)=>({...r,loading:!1,error:o.error,ready:!1})),(0,c.on)(m.fetchSearchResultsSuccess,(r,o)=>({...r,lenrEvents:o.payload,loading:!1,ready:!0})),(0,c.on)(m.findEventId,(r,o)=>({...r,currentEventId:o.payload})),(0,c.on)(m.loadEventDetail,(r,o)=>({...r,loading:!0,ready:!1,error:!1,currentEventId:o.payload.r_id})),(0,c.on)(m.loadEventDetailFailure,(r,o)=>({...r,loading:!1,ready:!1,error:o.error})),(0,c.on)(m.loadEventDetailSuccess,(r,o)=>({...r,loading:!1,ready:!1,error:!1,currentEvent:o.payload})),(0,c.on)(m.sortSearchResults,(r,o)=>({...r,lenrEvents:o.payload}))),h=(0,c.Tz)({name:"lenrevents",reducer:B,extraSelectors:({selectCurrentEvent:r,selectLenrEvents:o})=>({selectNextId:(0,c.P1)(r,o,(a,n)=>{const t=n.findIndex(l=>l.id===a.id);return t>=0&&t<n.length-1?n[t+1].id:-1}),selectPriorId:(0,c.P1)(r,o,(a,n)=>{const t=n.findIndex(l=>l.id===a.id);return t>0?n[t-1].id:-1})})});var v=i(6814),d=i(6223),T=i(2296),g=i(5195),y=i(5683),P=i(617),I=i(2032);function X(r,o){if(1&r&&(e.TgZ(0,"div",11)(1,"mat-label"),e._uU(2,"Abstract"),e.qZA(),e.TgZ(3,"mat-label",12),e._uU(4),e.qZA()()),2&r){const a=e.oxw(2);e.xp6(4),e.Oqu(a.event.abstract)}}function W(r,o){if(1&r&&(e.TgZ(0,"li")(1,"a",14),e._uU(2),e.qZA()()),2&r){const a=o.$implicit;e.xp6(1),e.s9C("href",a,e.LSH),e.xp6(1),e.hij(" ",a," ")}}function $(r,o){if(1&r&&(e.TgZ(0,"div",11)(1,"mat-label"),e._uU(2," Active Link(s): (click on each to open it in another tab) "),e.qZA(),e.TgZ(3,"mat-label")(4,"ul"),e.YNc(5,W,3,2,"li",13),e.qZA()()()),2&r){const a=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",a.event.hyperlinks)}}function ee(r,o){if(1&r&&(e.TgZ(0,"li")(1,"a",15),e._uU(2),e.qZA()()),2&r){const a=o.$implicit;e.xp6(1),e.s9C("href",a,e.LSH),e.xp6(1),e.hij(" ",a," ")}}function te(r,o){if(1&r&&(e.TgZ(0,"div",11)(1,"mat-label"),e._uU(2," Citations: An 'Enter' key separated list of links (with optional notes) that cite this. "),e.qZA(),e.TgZ(3,"mat-label")(4,"ul"),e.YNc(5,ee,3,2,"li",13),e.qZA()()()),2&r){const a=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",a.event.citations)}}function ne(r,o){if(1&r&&(e.TgZ(0,"div",16)(1,"mat-label"),e._uU(2," Headline: As you or the popular or scientific press might or did describe it. "),e.qZA(),e.TgZ(3,"mat-label",17),e._uU(4),e.qZA()()),2&r){const a=e.oxw(2);e.xp6(4),e.hij(" ",a.event.headline," ")}}function re(r,o){if(1&r&&(e.TgZ(0,"div")(1,"div",5)(2,"mat-label"),e._uU(3,"Category:"),e.qZA(),e.TgZ(4,"mat-label",6),e._uU(5),e.qZA(),e.TgZ(6,"mat-label"),e._uU(7,"Year of Publication:"),e.qZA(),e.TgZ(8,"mat-label",6),e._uU(9),e.qZA(),e.TgZ(10,"mat-label"),e._uU(11,"Database Index:"),e.qZA(),e.TgZ(12,"mat-label",6),e._uU(13),e.qZA()(),e.TgZ(14,"mat-card")(15,"mat-card-content",7)(16,"div",8)(17,"mat-label"),e._uU(18," Author (last name, initials) or comma-separated list of Authors "),e.qZA(),e.TgZ(19,"mat-label",6),e._uU(20),e.qZA(),e.TgZ(21,"mat-label"),e._uU(22," Title: The formal title of this entry, if applicable "),e.qZA(),e.TgZ(23,"mat-label",6),e._uU(24),e.qZA(),e.TgZ(25,"mat-label"),e._uU(26," Journal Title: Title of the Journal, Proceedings, Book, etc "),e.qZA(),e.TgZ(27,"mat-label",6),e._uU(28),e.qZA(),e.TgZ(29,"mat-label"),e._uU(30," Editor (last name, initials) of the collective work, or comma-separated list of Editors "),e.qZA(),e.TgZ(31,"mat-label",6),e._uU(32),e.qZA(),e.TgZ(33,"mat-label"),e._uU(34," Publisher of the Journal, Proceedings, Book, etc: "),e.qZA(),e.TgZ(35,"mat-label",6),e._uU(36),e.qZA(),e.TgZ(37,"mat-label"),e._uU(38,"City hosting research, conference, etc:"),e.qZA(),e.TgZ(39,"mat-label",6),e._uU(40),e.qZA(),e.TgZ(41,"mat-label"),e._uU(42," Publishing date or span of dates of conference: "),e.qZA(),e.TgZ(43,"mat-label",6),e._uU(44),e.qZA(),e.TgZ(45,"mat-label"),e._uU(46," Comment: "),e.TgZ(47,"sub"),e._uU(48," Informed comments, by-lines and info not captured elsewhere. "),e.qZA()(),e.TgZ(49,"mat-label",6),e._uU(50),e.qZA(),e.TgZ(51,"mat-label"),e._uU(52," Keywords: A comma separated list of keywords or short phrases "),e.qZA(),e.TgZ(53,"mat-label",6),e._uU(54),e.qZA()(),e.YNc(55,X,5,1,"div",9),e.YNc(56,$,6,1,"div",9),e.YNc(57,te,6,1,"div",9),e.YNc(58,ne,5,1,"div",10),e.qZA()()()),2&r){const a=e.oxw();e.xp6(5),e.Oqu(a.event.category),e.xp6(4),e.Oqu(a.event.year),e.xp6(4),e.Oqu(a.event.id),e.xp6(7),e.Oqu(a.event.author),e.xp6(4),e.Oqu(a.event.title),e.xp6(4),e.Oqu(a.event.journal),e.xp6(4),e.Oqu(a.event.editor),e.xp6(4),e.Oqu(a.event.publisher),e.xp6(4),e.Oqu(a.event.city),e.xp6(4),e.Oqu(a.event.date),e.xp6(6),e.hij(" ",a.event.comment," "),e.xp6(4),e.Oqu(a.event.keywords),e.xp6(1),e.Q6J("ngIf",a.event.abstract),e.xp6(1),e.Q6J("ngIf",a.event.hyperlinks),e.xp6(1),e.Q6J("ngIf",a.event.citations),e.xp6(1),e.Q6J("ngIf",a.event.headline)}}function ae(r,o){if(1&r){const a=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.priorRow())}),e.TgZ(2,"span"),e._uU(3,"Prior"),e.qZA(),e.TgZ(4,"mat-icon"),e._uU(5,"chevron_left"),e.qZA()(),e.TgZ(6,"button",19),e.NdJ("click",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.nextRow())}),e.TgZ(7,"span"),e._uU(8,"Next"),e.qZA(),e.TgZ(9,"mat-icon",20),e._uU(10,"chevron_right"),e.qZA()()()}if(2&r){const a=e.oxw();e.xp6(1),e.Q6J("disabled",!a.priorId),e.xp6(5),e.Q6J("disabled",!a.nextId)}}let D=(()=>{var r;class o{constructor(){this.back=new e.vpe,this.navigator=new e.vpe,this.goBack=()=>{this.back.emit()},this.setNextAndPriorIds=()=>{let n=0,t=0;if(this.event&&this.eventList&&this.eventList.length>0){const s=this.eventList.findIndex(l=>l.id===this.event.id);s>=0&&(s<this.eventList.length-1&&(n=this.eventList[s+1].id),s>0&&(t=this.eventList[s-1].id))}this.nextId=n,this.priorId=t}}set event(n){this._event=n,this.setNextAndPriorIds()}get event(){return this._event}set eventList(n){this._eventList=n,this.setNextAndPriorIds()}get eventList(){return this._eventList}nextRow(){this.navigator.emit(this.nextId)}priorRow(){this.navigator.emit(this.priorId)}}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["mfmp-lenr-events-detail"]],inputs:{event:"event",eventList:"eventList"},outputs:{back:"back",navigator:"navigator"},standalone:!0,features:[e.jDz],decls:8,vars:2,consts:[[1,"wrapper"],[4,"ngIf"],["align","end"],["class","actions",4,"ngIf"],["type","button","mat-raised-button","","color","primary",3,"click"],[1,"header","flexrow","space-evenly"],[1,"content"],[1,"mat-elevation-z2"],[1,"grid"],["class","flexrow",4,"ngIf"],["class","flexcolumn",4,"ngIf"],[1,"flexrow"],[1,"content","abstract"],[4,"ngFor","ngForOf"],["target","_blank","noreferrer","","noopener","",3,"href"],["target","_blank","noopener","","noreferrer","",3,"href"],[1,"flexcolumn"],[1,"content","mat-elevation-z2"],[1,"actions"],["type","button","mat-flat-button","",3,"disabled","click"],["hover","next"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-card",0)(1,"mat-card-content"),e.YNc(2,re,59,16,"div",1),e.qZA(),e.TgZ(3,"mat-card-footer",2),e._UZ(4,"div"),e.YNc(5,ae,11,2,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return t.goBack()}),e._uU(7,"Back"),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("ngIf",t.event),e.xp6(3),e.Q6J("ngIf",t.event))},dependencies:[v.ez,v.sg,v.O5,d.u5,T.ot,T.lW,g.QW,g.a8,g.dn,g.rt,P.Ps,P.Hw,I.c,y.hX,y.lN],styles:[".mdc-card.wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;background-color:transparent}.mat-mdc-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin-bottom:0;box-sizing:border-box}.mat-mdc-card-content[_ngcontent-%COMP%]{max-height:100%;flex-grow:1;overflow:auto;margin-bottom:1ex}.mat-mdc-card-footer[_ngcontent-%COMP%]{padding:1em;display:flex;flex-direction:row;justify-content:space-between}div.flexrow[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:1vh}div.flexrow[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{padding-right:1em}.header[_ngcontent-%COMP%]{margin-bottom:1em}div.flexcolumn[_ngcontent-%COMP%]{display:flex;flex-direction:column}div.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;row-gap:1vh;margin-bottom:1vh}.space-evenly[_ngcontent-%COMP%]{justify-content:space-evenly}.content[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;min-width:10em;padding-left:1ex;padding-right:1ex;border:1px solid darkgray;font-weight:500;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.hidden[_ngcontent-%COMP%]{visibility:hidden}li[_ngcontent-%COMP%]{list-style-type:none}mat-label[_ngcontent-%COMP%]{display:block}mat-label.abstract[_ngcontent-%COMP%]{max-height:2cm;overflow-y:scroll}div.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}"]}),o})();var oe=i(4292),q=i(8675),se=i(902),ie=i(3305),k=i(8525),U=i(4104),le=i(2655),Y=i(1476),ce=i(5940),M=i(3566),f=i(5313);const de=["paginator"],me=["tableSort"];function pe(r,o){1&r&&(e.TgZ(0,"th",13),e._uU(1,"Year"),e.qZA())}function ue(r,o){if(1&r&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&r){const a=o.$implicit;e.xp6(1),e.Oqu(a.year)}}function he(r,o){1&r&&(e.TgZ(0,"th",13),e._uU(1,"Category"),e.qZA())}function ge(r,o){if(1&r&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&r){const a=o.$implicit;e.xp6(1),e.Oqu(a.category)}}function fe(r,o){1&r&&(e.TgZ(0,"th",13),e._uU(1,"Author"),e.qZA())}function ve(r,o){if(1&r&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&r){const a=o.$implicit;e.xp6(1),e.Oqu(a.author)}}function _e(r,o){1&r&&(e.TgZ(0,"th",13),e._uU(1,"Title"),e.qZA())}function xe(r,o){if(1&r&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&r){const a=o.$implicit;e.xp6(1),e.Oqu(a.title)}}function ye(r,o){1&r&&(e.TgZ(0,"th",13),e._uU(1,"ID"),e.qZA())}function Ce(r,o){if(1&r&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&r){const a=o.$implicit;e.xp6(1),e.Oqu(a.id)}}function Ze(r,o){1&r&&e._UZ(0,"tr",15)}function Ee(r,o){if(1&r){const a=e.EpF();e.TgZ(0,"tr",16),e.NdJ("click",function(t){const l=e.CHM(a).$implicit,u=e.oxw();return e.KtG(u.getEvent(t,l))}),e.qZA()}}const Te=function(){return[10,20,50,100]};let Ie=(()=>{var r;class o{set matPaginator(n){this.paginator=n}set matSort(n){this.tableSort=n}constructor(){this.service=(0,e.f3M)(x),this.eventClicked=new e.vpe,this.eventSorted=new e.vpe,this.length=0,this.pageSize=20,this.pageIndex=0,this.sortedData=[],this.pageSizeOptions=[10,20,50,100],this.displayColumns="year,category,author,title,id".split(","),this.hidePageSize=!1,this.showPageSizeOptions=!0,this.showFirstLastButtons=!0,this.buildDataSource=()=>{this.dataSource=new f.by(this.eventList),this.dataSource.sort=this.tableSort,this.setupPaginator(),this.dataSource.paginator=this.paginator,this.length=this.eventList.length},this.setupPaginator=()=>{this.paginator.pageSize=this.pageSize,this.paginator.pageSizeOptions=this.pageSizeOptions,this.paginator.hidePageSize=!1,this.paginator.showFirstLastButtons=!0,this.paginator.pageIndex=0}}ngOnInit(){this.buildDataSource()}handlePageEvent(n){this.pageEvent=n,this.pageSize=n.pageSize,this.pageIndex=n.pageIndex}getEvent(n,t){this.eventClicked.emit(t.id)}onSortChange(){this.eventSorted.emit(this.dataSource.data)}}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["mfmp-lenr-events-results"]],viewQuery:function(n,t){if(1&n&&(e.Gf(de,7),e.Gf(me,7)),2&n){let s;e.iGM(s=e.CRH())&&(t.matPaginator=s.first),e.iGM(s=e.CRH())&&(t.matSort=s.first)}},inputs:{loading:"loading",eventList:"eventList"},outputs:{eventClicked:"eventClicked",eventSorted:"eventSorted"},standalone:!0,features:[e.jDz],decls:24,vars:8,consts:[["mat-table","","matSort","",1,"mat-elevation-z2",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","year"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","author"],["matColumnDef","title"],["matColumnDef","id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions","length","pageIndex","page"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"table",0,1),e.NdJ("matSortChange",function(){return t.onSortChange()}),e.ynx(4,2),e.YNc(5,pe,2,0,"th",3),e.YNc(6,ue,2,1,"td",4),e.BQk(),e.ynx(7,5),e.YNc(8,he,2,0,"th",3),e.YNc(9,ge,2,1,"td",4),e.BQk(),e.ynx(10,6),e.YNc(11,fe,2,0,"th",3),e.YNc(12,ve,2,1,"td",4),e.BQk(),e.ynx(13,7),e.YNc(14,_e,2,0,"th",3),e.YNc(15,xe,2,1,"td",4),e.BQk(),e.ynx(16,8),e.YNc(17,ye,2,0,"th",3),e.YNc(18,Ce,2,1,"td",4),e.BQk(),e.YNc(19,Ze,1,0,"tr",9),e.YNc(20,Ee,1,0,"tr",10),e.qZA()(),e.TgZ(21,"mat-card-actions")(22,"mat-paginator",11,12),e.NdJ("page",function(l){return t.handlePageEvent(l)}),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(17),e.Q6J("matHeaderRowDef",t.displayColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayColumns),e.xp6(2),e.Q6J("pageSize",20)("pageSizeOptions",e.DdM(7,Te))("length",t.dataSource.data.length)("pageIndex",0))},dependencies:[v.ez,g.QW,g.a8,g.hq,g.dn,y.lN,I.c,Y.TU,Y.NW,M.JX,M.YE,M.nU,f.p0,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,ce.Cq],styles:[".mat-mdc-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}table.mat-mdc-table[_ngcontent-%COMP%]{border-collapse:collapse;border:1px solid lightgray}.mdc-data-table__header-row[_ngcontent-%COMP%]{height:auto!important}.mdc-data-table__header-cell[_ngcontent-%COMP%]{border:1px solid lightgray;padding:3px 8px!important}.mdc-data-table__row[_ngcontent-%COMP%]{height:auto!important}.mdc-data-table__cell[_ngcontent-%COMP%]{border:1px solid lightgray;padding:3px 8px!important}.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#fff5a2!important}.progress-spinner[_ngcontent-%COMP%]{margin-top:3em;margin-left:auto;margin-right:auto}"]}),o})();var be=i(2070);const Le=r=>{const o=r.get("s_Year_from"),a=r.get("s_Year_to"),n=o?.value,t=a?.value;return n&&t&&n>t?{yearRangeError:!0}:null},Ae=r=>{const o=r.get("s_Index_from"),a=r.get("s_Index_to"),n=o?.value,t=a?.value;return n&&t&&n>t?{indexRangeError:!0}:null};var Se=i(3680);const we=["tabGroup"];function Pe(r,o){if(1&r&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&r){const a=o.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}function qe(r,o){1&r&&e._UZ(0,"mfmp-progress-spinner")}const Ue=function(){return[]};function Me(r,o){if(1&r){const a=e.EpF();e.TgZ(0,"mfmp-lenr-events-results",29),e.NdJ("eventClicked",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.selectEvent(t))})("eventSorted",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.sortEvent(t))}),e.qZA()}if(2&r){const a=e.oxw();let n;e.Q6J("loading",a.loading)("eventList",null!==(n=a.eventList)&&void 0!==n?n:e.DdM(2,Ue))}}function Oe(r,o){if(1&r){const a=e.EpF();e.TgZ(0,"mfmp-lenr-events-detail",30),e.NdJ("back",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.back())})("navigator",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.navigate(t))}),e.qZA()}if(2&r){const a=e.oxw();e.Q6J("event",a.event)("eventList",a.eventList)}}let Ne=(()=>{var r;class o{constructor(){this._categories=[],this.searcher=new e.vpe,this.fetcher=new e.vpe,this.sorter=new e.vpe,this.eventList=null,this.fb=(0,e.f3M)(d.qu),this.now=new Date,this.year=this.now.getFullYear(),this.selectedTabIndex=0,this.floatLabelControl=new d.NI("auto"),this.hideRequiredControl=new d.NI(!1),this.buildForm=()=>{this.eventForm=this.fb.group({s_Year_from:new d.NI(this.year,[d.kI.required]),s_Year_to:new d.NI(this.year,[d.kI.required]),s_Index_from:new d.NI(1,[d.kI.required]),s_Index_to:new d.NI(this.maxId,[d.kI.required]),s_Category:new d.NI("All",[d.kI.required]),s_Author:new d.NI,s_Title:new d.NI,s_Keywords:new d.NI},{validators:[Ae,Le]}),this.eventForm.get("s_Category")?.setValue("All")},this.resetForm=()=>{this.eventForm.setValue(this.formValueBackup)},this.minValue=n=>{const t=this.eventForm.get(n)?.value;return t||null},this.maxValue=n=>{const t=this.eventForm.get(n)?.value;return t||null},this.selectEvent=n=>{this.eventId=n,this.tabGroup.selectedIndex=2},this.sortEvent=n=>{this.sorter.emit(n)},this.search=()=>{const n={...this.eventForm.value};n.doit="refresh",this.searcher.emit(n)},this.fetch=()=>{const n={...this.eventForm.value};n.r_id=this.eventId,n.doit="refresh",this.fetcher.emit(n)}}get categories(){return null!==this._categories?this._categories:[]}set categories(n){n&&(this._categories=n)}get maxId(){return this._maxId}set maxId(n){this._maxId=n,this.eventForm?.get("s_Index_to")?.setValue(n),this.formValueBackup=this.eventForm?.value}get pageDescription(){return this.eventCount?this.description?.replace("eventCount",this.eventCount.toString()):this.description}get minYear(){return this.minValue("s_Year_from")}get maxYear(){return this.maxValue("s_Year_to")}get minIndex(){return this.minValue("s_Index_from")}get maxIndex(){return this.maxValue("s_Index_to")}ngOnInit(){this.buildForm()}ngAfterViewInit(){this.formValueBackup=this.eventForm.value}getFloatLabelValue(){return this.floatLabelControl.value||"auto"}max(n,t){return n&&t?n>t?n:t:n||t}min(n,t){return n&&t?n<t?n:t:n||t}navigate(n){const t={...this.eventForm.value};t.r_id=n,t.doit="refresh",this.fetcher.emit(t)}back(){this.tabGroup.selectedIndex=1}clear(){this.tabGroup.selectedIndex=0}onSelectedIndexChange(n){switch(n){case 0:this.eventId=null;break;case 1:this.search();break;case 2:this.fetch()}}}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["mfmp-lenr-events-face"]],viewQuery:function(n,t){if(1&n&&e.Gf(we,5),2&n){let s;e.iGM(s=e.CRH())&&(t.tabGroup=s.first)}},inputs:{eventCount:"eventCount",description:"description",eventList:"eventList",loading:"loading",ready:"ready",event:"event",categories:"categories",maxId:"maxId"},outputs:{searcher:"searcher",fetcher:"fetcher",sorter:"sorter"},standalone:!0,features:[e.jDz],decls:90,vars:32,consts:[["id","description"],["href","https://www.LENR-CANR.org","target","_blank","noopener","","noreferrer",""],[3,"formGroup"],["mat-stretch-tabs","false","animationDuration","250ms",3,"selectedIndex","selectedIndexChange"],["tabGroup",""],["label","Search"],[1,"pips"],[1,"label"],[3,"hideRequiredMarker"],["matInput","","type","number","formControlName","s_Year_from","min","1800","placeholder","min. 1800","required","true","onfocus","this.select()",3,"max","value"],["matInput","","type","number","formControlName","s_Year_to","required","true","onfocus","this.select()",3,"min","max","placeholder"],["matInput","","type","number","min","1","formControlName","s_Index_from","required","true","value","1","onfocus","this.select()",3,"max","placeholder"],["matInput","","type","number","formControlName","s_Index_to","required","true","onfocus","this.select()",3,"min","max","placeholder"],[1,"spacer"],[1,"filters"],["title","Categories","formControlName","s_Category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","s_Author","placeholder","Surname of one author"],["matInput","","type","text","formControlName","s_Title","placeholder","Word or phrase in the Title"],["matInput","","type","text","formCotrolName","s_Keywords","placeholder","Word or phrase in the Keywords"],["align","end"],[1,"buttoncell","label"],["type","button","mat-raised-button","","color","primary",3,"click"],["label","Results"],[4,"ngIf"],[3,"loading","eventList","eventClicked","eventSorted",4,"ngIf"],["label","Detail"],[3,"event","eventList","back","navigator",4,"ngIf"],[3,"value"],[3,"loading","eventList","eventClicked","eventSorted"],[3,"event","eventList","back","navigator"]],template:function(n,t){if(1&n){const s=e.EpF();e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6," Core data thanks to "),e.TgZ(7,"a",1),e._uU(8," LENR-CANR "),e.qZA(),e._uU(9," - more being added by the MFMP. "),e.qZA()(),e.TgZ(10,"form",2)(11,"mat-tab-group",3,4),e.NdJ("selectedIndexChange",function(u){return t.selectedTabIndex=u})("selectedIndexChange",function(u){return t.onSelectedIndexChange(u)}),e.TgZ(13,"mat-tab",5)(14,"mat-card")(15,"mat-card-content")(16,"div",6)(17,"div",7)(18,"label"),e._uU(19,"Year from:"),e.qZA()(),e.TgZ(20,"div")(21,"mat-form-field",8),e._UZ(22,"input",9),e.ALo(23,"date"),e.TgZ(24,"mat-hint"),e._uU(25),e.qZA(),e._UZ(26,"mat-error"),e.qZA()(),e.TgZ(27,"div",7)(28,"label"),e._uU(29,"Year to:"),e.qZA()(),e.TgZ(30,"div")(31,"mat-form-field",8),e._UZ(32,"input",10),e.ALo(33,"date"),e.TgZ(34,"mat-hint"),e._uU(35),e.qZA()()(),e.TgZ(36,"div",7)(37,"label"),e._uU(38,"Index from:"),e.qZA()(),e.TgZ(39,"div")(40,"mat-form-field",8),e._UZ(41,"input",11),e.TgZ(42,"mat-hint"),e._uU(43),e.qZA()()(),e.TgZ(44,"div",7)(45,"label"),e._uU(46,"Index to:"),e.qZA()(),e.TgZ(47,"div")(48,"mat-form-field"),e._UZ(49,"input",12),e.TgZ(50,"mat-hint"),e._uU(51),e.qZA()()()(),e._UZ(52,"div",13),e.TgZ(53,"div",14)(54,"div",7)(55,"label"),e._uU(56,"Category:"),e.qZA()(),e.TgZ(57,"div")(58,"mat-form-field")(59,"mat-select",15),e.YNc(60,Pe,2,2,"mat-option",16),e.qZA()()(),e.TgZ(61,"div",7)(62,"label"),e._uU(63,"Author Surname:"),e.qZA()(),e.TgZ(64,"div")(65,"mat-form-field"),e._UZ(66,"input",17),e.qZA()(),e.TgZ(67,"div",7)(68,"label"),e._uU(69,"Title"),e.qZA()(),e.TgZ(70,"div")(71,"mat-form-field"),e._UZ(72,"input",18),e.qZA()(),e.TgZ(73,"div",7)(74,"label"),e._uU(75,"Keyword(s)"),e.qZA()(),e.TgZ(76,"div")(77,"mat-form-field"),e._UZ(78,"input",19),e.qZA()()()(),e.TgZ(79,"mat-card-actions",20)(80,"div",21)(81,"button",22),e.NdJ("click",function(){e.CHM(s);const u=e.MAs(12);return e.KtG(u.selectedIndex=1)}),e._uU(82," Search "),e.qZA(),e.TgZ(83,"button",22),e.NdJ("click",function(){return t.resetForm()}),e._uU(84," Clear "),e.qZA()()()()(),e.TgZ(85,"mat-tab",23),e.YNc(86,qe,1,0,"mfmp-progress-spinner",24),e.YNc(87,Me,1,3,"mfmp-lenr-events-results",25),e.qZA(),e.TgZ(88,"mat-tab",26),e.YNc(89,Oe,1,2,"mfmp-lenr-events-detail",27),e.qZA()()()()()}2&n&&(e.xp6(4),e.Oqu(t.pageDescription),e.xp6(6),e.Q6J("formGroup",t.eventForm),e.xp6(1),e.Q6J("selectedIndex",t.selectedTabIndex),e.xp6(10),e.Q6J("hideRequiredMarker",!1),e.xp6(1),e.s9C("max",t.max(1800,t.maxYear)),e.s9C("value",e.xi3(23,26,t.now,"yyyy")),e.xp6(3),e.hij(" min: 1800, max: ",t.max(1800,t.maxYear)," "),e.xp6(6),e.Q6J("hideRequiredMarker",!1),e.xp6(1),e.s9C("min",t.min(t.year,t.minYear)),e.s9C("max",t.year),e.s9C("placeholder",e.xi3(33,29,t.now,"yyyy")),e.xp6(3),e.AsE(" min: ",t.min(t.year,t.minYear),", max: ",t.year," "),e.xp6(5),e.Q6J("hideRequiredMarker",!1),e.xp6(1),e.s9C("max",t.min(t.maxIndex,t.maxId)),e.s9C("placeholder",t.minIndex),e.xp6(2),e.hij("min: 1, max: ",t.min(t.maxIndex,t.maxId),""),e.xp6(6),e.s9C("min",t.max(1,t.minIndex)),e.s9C("max",t.maxId),e.s9C("placeholder",t.maxId),e.xp6(2),e.AsE(" min: ",t.max(1,t.minIndex),", max: ",t.maxId," "),e.xp6(9),e.Q6J("ngForOf",t.categories),e.xp6(26),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",t.ready),e.xp6(2),e.Q6J("ngIf",t.event))},dependencies:[v.ez,v.sg,v.O5,v.uU,le.Bz,T.ot,T.lW,g.QW,g.a8,g.hq,g.dn,ie.To,y.lN,y.KE,y.bx,y.TO,P.Ps,I.c,I.Nt,k.LD,k.gD,Se.ey,U.Nh,U.uX,U.SP,d.UX,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.Q7,d.qQ,d.Fd,d.sg,d.u,D,Ie,be.O],styles:["div.wrapper[_ngcontent-%COMP%], .mat-tab-body[_ngcontent-%COMP%]{height:100%}.mdc-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:stretch}div#description[_ngcontent-%COMP%]{text-align:center}div.label[_ngcontent-%COMP%]{padding-right:1em;display:flex;justify-content:flex-end;align-items:center}div.prompts[_ngcontent-%COMP%]{align-items:center!important}div.prompts[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:1em}div.pips[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto;margin-right:1em}div.pips[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{justify-content:center}div.spacer[_ngcontent-%COMP%]{height:2em}div.filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 4fr;margin-right:1em}div.filters[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:50%!important}div.buttoncell[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}div.buttoncell[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-right:1em}"]}),o})();const Fe=[{path:"",component:(()=>{var r;class o{constructor(){this.store=(0,e.f3M)(c.yh),this.notifier=(0,e.f3M)(S.c),this.headerService=(0,e.f3M)(q.d),this.eventService=(0,e.f3M)(x),this.categories=(0,C.of)([""]),this.eventList=null,this.event=null,this.loading=(0,C.of)(!1),this.payload=new oe.q}ngOnInit(){this.headerService.buildPageHeader("lenr-events");const t=(new Date).getFullYear();this.payload.s_Author="",this.payload.s_Category="",this.payload.s_Index_from=String(1),this.payload.s_Index_to=String(1),this.payload.s_Keywords=[""],this.payload.s_Title="",this.payload.s_Year_from=String(t),this.payload.s_Year_to=String(t),this.payload.r_id_copy="",this.payload.doit="refresh",this.store.dispatch(m.prefetch({payload:this.payload})),this.categories=this.store.select(h.selectCategories),this.eventCount=this.store.select(h.selectEventCount),this.maxId=this.store.select(h.selectMaxEventId),this.eventList=this.store.select(h.selectLenrEvents),this.loading=this.store.select(h.selectLoading),this.ready=this.store.select(h.selectReady),this.event=this.store.select(h.selectCurrentEvent),this.pageDescription=this.store.select(se.z.selectPageDescription),this.nextEventId=this.store.select(h.selectNextId),this.priorEventId=this.store.select(h.selectPriorId)}search(n){this.store.dispatch(m.fetchSearchResults({payload:n}))}fetch(n){this.store.dispatch(m.loadEventDetail({payload:n}))}sort(n){this.store.dispatch(m.sortSearchResults({payload:n}))}}return(r=o).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["mfmp-lenr-events-head"]],standalone:!0,features:[e.jDz],decls:9,vars:24,consts:[[3,"categories","eventCount","eventList","maxId","description","loading","ready","event","searcher","fetcher","sorter"]],template:function(n,t){1&n&&(e.TgZ(0,"mfmp-lenr-events-face",0),e.NdJ("searcher",function(l){return t.search(l)})("fetcher",function(l){return t.fetch(l)})("sorter",function(l){return t.sort(l)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.ALo(7,"async"),e.ALo(8,"async"),e.qZA()),2&n&&e.Q6J("categories",e.lcZ(1,8,t.categories))("eventCount",e.lcZ(2,10,t.eventCount))("eventList",e.lcZ(3,12,t.eventList))("maxId",e.lcZ(4,14,t.maxId))("description",e.lcZ(5,16,t.pageDescription))("loading",e.lcZ(6,18,t.loading))("ready",e.lcZ(7,20,t.ready))("event",t.event?e.lcZ(8,22,t.event):null)},dependencies:[v.ez,v.Ov,Ne],encapsulation:2}),o})(),providers:[(0,c.oY)(h),(0,p.y3)([E]),{provide:x,useClass:x},{provide:q.d,useClass:q.d},{provide:w,useClass:w}]},{path:"details",component:D,providers:[(0,c.oY)(h),(0,p.y3)([E]),{provide:N.K,useClass:N.K}]}]}}]);