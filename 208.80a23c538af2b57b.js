"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[208],{1208:(Q,P,o)=>{o.r(P),o.d(P,{NOTES_ROUTES:()=>Z});var d={};o.r(d),o.d(d,{fetchPageEFfect:()=>O,fetchPageErrorAlert:()=>L});var g=o(8675),p=o(6814),t=o(5879),u=o(5195),c=o(4221),N=o(2096);const i=(0,c.R7)({source:"Notes API",events:{reset:(0,c.uZ)(),fetchPage:(0,c.uZ)(),fetchPageSuccess:(0,c.Ky)(),fetchPageFailure:e=>({error:e})}});var m=o(7483),E=o(4664),C=o(7398),M=o(6306),S=o(9397),F=o(2744),T=o(6414);let v=(()=>{var e;class s{constructor(){this.crud=(0,t.f3M)(T.I),this.page="notes.php"}htmlToDocument(n){const f=(new DOMParser).parseFromString(n,"text/html").activeElement?.outerHTML??"";let h=document.implementation.createHTMLDocument();return h.documentElement.innerHTML="<head></head>"+f,h}getNotesPage(){return this.crud.getPage(this.page)}parseNotesPage(n){const l=(new DOMParser).parseFromString(n,"text/html").querySelector("body");for(;;){const h=l.children[0];if("H5"===h.tagName)break;l.removeChild(h)}let f="";for(let h=0;h<l.children.length;h++)f+=l.children[h].outerHTML;return f}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),s})();const O=(0,m.GW)((e=(0,t.f3M)(m.eX))=>{const s=(0,t.f3M)(v);return e.pipe((0,m.l4)(i.fetchPage),(0,E.w)(()=>s.getNotesPage().pipe((0,C.U)(r=>s.parseNotesPage(r)),(0,C.U)(r=>i.fetchPageSuccess({payload:r})),(0,M.K)(r=>(0,N.of)(i.fetchPageFailure({error:r}))))))},{functional:!0}),L=(0,m.GW)(()=>{const e=(0,t.f3M)(F.c);return(0,t.f3M)(m.eX).pipe((0,m.l4)(i.fetchPageFailure),(0,S.b)(()=>e.showClientError("No results found.")))},{functional:!0,dispatch:!1}),H={html:"",ready:!1,loading:!1,error:null},D=(0,c.Lq)(H,(0,c.on)(i.reset,()=>({...H})),(0,c.on)(i.fetchPage,e=>({...e,ready:!1,loading:!0,error:null})),(0,c.on)(i.fetchPageSuccess,(e,s)=>({...e,loading:!1,ready:!0,html:s.payload})),(0,c.on)(i.fetchPageFailure,(e,s)=>({...e,loading:!1,error:s.error}))),y=(0,c.Tz)({name:"notes",reducer:D});var R=o(1303);let A=(()=>{var e;class s{constructor(n,a){this._elementRef=n,this._router=a}ngOnInit(){console.log("htmldirective oninit")}ngOnChanges(){if(console.log("htmldirective onchanges"),this.html){this._uniqueId||=[...this._elementRef.nativeElement.attributes].find(a=>a.name.startsWith("_ngcontent-")).name,this._elementRef.nativeElement.innerHTML=this.html;const n=this._elementRef.nativeElement.querySelectorAll("*");for(const a of n)if(a.setAttribute(this._uniqueId,""),"A"===a.tagName){const l=a.href?.toLowerCase();l?.startsWith(location.origin.toLowerCase())&&a.addEventListener("click",f=>{this._router.navigate([l.substring(location.origin.length)]),f.preventDefault()})}}else this._elementRef.nativeElement.innerHTML=null}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(R.F0))},e.\u0275dir=t.lG2({type:e,selectors:[["","mfmp-html",""]],inputs:{html:"html"},standalone:!0,features:[t.TTD]}),s})(),z=(()=>{var e;class s{constructor(){this._html=""}set html(n){this._html=n}get html(){return this._html?this._html:""}ngOnInit(){console.log(this.html)}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-note-content"]],inputs:{html:"html"},standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[["mfmp-html","",3,"html"]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._UZ(2,"div",0),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("html",a.html))},dependencies:[p.ez,A,u.QW,u.a8,u.dn],styles:["h5[_ngcontent-%COMP%]{font-size:16pt;font-weight:500}"]}),s})();const I=["mfmpContent"],Z=[{path:"",component:(()=>{var e;class s{constructor(){this.store=(0,t.f3M)(c.yh),this.headerService=(0,t.f3M)(g.d),this.html=(0,N.of)()}ngOnInit(){this.headerService.buildPageHeader("notes"),this.html=this.store.select(y.selectHtml),this.store.dispatch(i.fetchPage())}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-notes"]],viewQuery:function(n,a){if(1&n&&t.Gf(I,5),2&n){let l;t.iGM(l=t.CRH())&&(a.container=l.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[3,"html"]],template:function(n,a){1&n&&(t._UZ(0,"mfmp-note-content",0),t.ALo(1,"async")),2&n&&t.Q6J("html",t.lcZ(1,1,a.html))},dependencies:[p.ez,p.Ov,u.QW,z],encapsulation:2}),s})(),providers:[(0,c.oY)(y),(0,m.y3)([d]),{provide:g.d,useClass:g.d},{provide:v,useClass:v}]}]}}]);