"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[465],{4465:(A,y,o)=>{o.r(y),o.d(y,{NOTES_ROUTES:()=>U});var u={};o.r(u),o.d(u,{fetchPageEFfect:()=>O,fetchPageErrorAlert:()=>z});var p=o(8675),g=o(6814),t=o(5879),f=o(5195),a=o(4221),N=o(2096);const c=(0,a.R7)({source:"Notes API",events:{reset:(0,a.uZ)(),fetchPage:(0,a.uZ)(),fetchPageSuccess:(0,a.Ky)(),fetchPageFailure:e=>({error:e})}});var h=o(7483),S=o(4664),C=o(7398),F=o(6306),H=o(9397),E=o(2744),T=o(6414);let v=(()=>{var e;class s{constructor(){this.crud=(0,t.f3M)(T.I),this.page="notes.php"}htmlToDocument(n){const d=(new DOMParser).parseFromString(n,"text/html").activeElement?.outerHTML??"";let l=document.implementation.createHTMLDocument();return l.documentElement.innerHTML="<head></head>"+d,l}getNotesPage(){return this.crud.getPage(this.page)}parseNotesPage(n){const i=(new DOMParser).parseFromString(n,"text/html").querySelector("body");for(;;){const l=i.children[0];if("H5"===l.tagName)break;i.removeChild(l)}let d="";for(let l=0;l<i.children.length;l++)d+=i.children[l].outerHTML;return d}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),s})();const O=(0,h.GW)((e=(0,t.f3M)(h.eX))=>{const s=(0,t.f3M)(v);return e.pipe((0,h.l4)(c.fetchPage),(0,S.w)(()=>s.getNotesPage().pipe((0,C.U)(r=>s.parseNotesPage(r)),(0,C.U)(r=>c.fetchPageSuccess({payload:r})),(0,F.K)(r=>(0,N.of)(c.fetchPageFailure({error:r}))))))},{functional:!0}),z=(0,h.GW)(()=>{const e=(0,t.f3M)(E.c);return(0,t.f3M)(h.eX).pipe((0,h.l4)(c.fetchPageFailure),(0,H.b)(()=>e.showClientError("No results found.")))},{functional:!0,dispatch:!1}),M={html:"",ready:!1,loading:!1,error:null},L=(0,a.Lq)(M,(0,a.on)(c.reset,()=>({...M})),(0,a.on)(c.fetchPage,e=>({...e,ready:!1,loading:!0,error:null})),(0,a.on)(c.fetchPageSuccess,(e,s)=>({...e,loading:!1,ready:!0,html:s.payload})),(0,a.on)(c.fetchPageFailure,(e,s)=>({...e,loading:!1,error:s.error}))),P=(0,a.Tz)({name:"notes",reducer:L});var Z=o(9693);let D=(()=>{var e;class s{constructor(){this._html=""}set html(n){this._html=n}get html(){return this._html?this._html:""}ngOnInit(){console.log(this.html)}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-note-content"]],inputs:{html:"html"},standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[["mfmp-html","",3,"html"]],template:function(n,m){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._UZ(2,"div",0),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("html",m.html))},dependencies:[g.ez,Z.s,f.QW,f.a8,f.dn],styles:["h5[_ngcontent-%COMP%]{font-size:16pt;font-weight:500}"]}),s})();const Q=["mfmpContent"],U=[{path:"",component:(()=>{var e;class s{constructor(){this.store=(0,t.f3M)(a.yh),this.headerService=(0,t.f3M)(p.d),this.html=(0,N.of)()}ngOnInit(){this.headerService.buildPageHeader("notes"),this.html=this.store.select(P.selectHtml),this.store.dispatch(c.fetchPage())}}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-notes"]],viewQuery:function(n,m){if(1&n&&t.Gf(Q,5),2&n){let i;t.iGM(i=t.CRH())&&(m.container=i.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[3,"html"]],template:function(n,m){1&n&&(t._UZ(0,"mfmp-note-content",0),t.ALo(1,"async")),2&n&&t.Q6J("html",t.lcZ(1,1,m.html))},dependencies:[g.ez,g.Ov,f.QW,D],encapsulation:2}),s})(),providers:[(0,a.oY)(P),(0,h.y3)([u]),{provide:p.d,useClass:p.d},{provide:v,useClass:v}]}]}}]);