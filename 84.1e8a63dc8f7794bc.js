"use strict";(self.webpackChunkv11=self.webpackChunkv11||[]).push([[84],{7084:(U,y,n)=>{n.r(y),n.d(y,{TABLES_IN_DETAIL_ROUTES:()=>Z});var u={};n.r(u),n.d(u,{fetchPageEFfect:()=>H,fetchPageErrorAlert:()=>O});var i=n(7483),l=n(4221),p=n(8675);const o=(0,l.R7)({source:"TablesInDetail API",events:{reset:(0,l.uZ)(),fetchPage:(0,l.uZ)(),fetchPageSuccess:(0,l.Ky)(),fetchPageFailure:e=>({error:e})}});var t=n(5879),b=n(4664),C=n(7398),M=n(6306),D=n(2096),S=n(9397),E=n(2744),F=n(6414);let g=(()=>{var e;class r{constructor(){this.crud=(0,t.f3M)(F.I),this.page="TablesInDetail.php"}htmlToDocument(a){const f=(new DOMParser).parseFromString(a,"text/html").activeElement?.outerHTML??"";let m=document.implementation.createHTMLDocument();return m.documentElement.innerHTML="<head></head>"+f,m}getTablesPage(){return this.crud.getPage(this.page)}parseTablesPage(a){const c=(new DOMParser).parseFromString(a,"text/html").querySelector("body");let f=0;for(;;){const h=c.children[0];if("P"===h.tagName&&f++,3===f)break;c.removeChild(h)}let m="";for(let h=0;h<c.children.length;h++)m+=c.children[h].outerHTML;return m}}return(e=r).\u0275fac=function(a){return new(a||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),r})();const H=(0,i.GW)((e=(0,t.f3M)(i.eX))=>{const r=(0,t.f3M)(g);return e.pipe((0,i.l4)(o.fetchPage),(0,b.w)(()=>r.getTablesPage().pipe((0,C.U)(s=>r.parseTablesPage(s)),(0,C.U)(s=>o.fetchPageSuccess({payload:s})),(0,M.K)(s=>(0,D.of)(o.fetchPageFailure({error:s}))))))},{functional:!0}),O=(0,i.GW)(()=>{const e=(0,t.f3M)(E.c);return(0,t.f3M)(i.eX).pipe((0,i.l4)(o.fetchPageFailure),(0,S.b)(()=>e.showClientError("No results found.")))},{functional:!0,dispatch:!1}),I={html:"",ready:!1,loading:!1,error:null},L=(0,l.Lq)(I,(0,l.on)(o.reset,()=>({...I})),(0,l.on)(o.fetchPage,e=>({...e,ready:!1,loading:!0,error:null})),(0,l.on)(o.fetchPageSuccess,(e,r)=>({...e,loading:!1,ready:!0,html:r.payload})),(0,l.on)(o.fetchPageFailure,(e,r)=>({...e,loading:!1,error:r.error}))),v=(0,l.Tz)({name:"tables-in-detail",reducer:L});var T=n(6814),P=n(5195),A=n(9693);let x=(()=>{var e;class r{set html(a){this._html=a}get html(){return this._html?this._html:""}}return(e=r).\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-tables-in-detail-face"]],inputs:{html:"html"},standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[["mfmp-html","",3,"html"]],template:function(a,d){1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._UZ(2,"div",0),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("html",d.html))},dependencies:[T.ez,A.s,P.QW,P.a8,P.dn],styles:["p[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;border:1px solid black}h6[_ngcontent-%COMP%]{font-size:1em;text-align:center;font-weight:500}"]}),r})();const z=["mfmpContent"],Z=[{path:"",component:(()=>{var e;class r{constructor(){this.store=(0,t.f3M)(l.yh),this.headerService=(0,t.f3M)(p.d),this.html=(0,D.of)()}ngOnInit(){this.headerService.buildPageHeader("tables-in-detail"),this.html=this.store.select(v.selectHtml),this.store.dispatch(o.fetchPage())}}return(e=r).\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["mfmp-tables-in-detail-head"]],viewQuery:function(a,d){if(1&a&&t.Gf(z,5),2&a){let c;t.iGM(c=t.CRH())&&(d.container=c.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[3,"html"]],template:function(a,d){1&a&&(t._UZ(0,"mfmp-tables-in-detail-face",0),t.ALo(1,"async")),2&a&&t.Q6J("html",t.lcZ(1,1,d.html))},dependencies:[T.ez,T.Ov,x],encapsulation:2}),r})(),providers:[(0,l.oY)(v),(0,i.y3)([u]),{provide:p.d,useClass:p.d},{provide:g,useClass:g}]}]}}]);